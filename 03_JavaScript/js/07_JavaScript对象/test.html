<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>

  <body>
    <script>
      class Observer {
        constructor() {
          this.message = [];
        }

        on(event, fn) {
          if (!this.message[type]) {
            this.message[type] = [];
          }
          this.message[type].push(fn);
        }

        off(event, fn) {
          if (!this.message[type]) return;
          if (!fn) {
            this.message[type] = null;
            return;
          }
          this.message[type] = this.message[type].fliter((item) => item !== fn);
        }

        emit(type) {
          if (!this.message[type]) return;
          this.message[type].forEach((fn) => {
            fn();
          });
        }
      }
    </script>
  </body>
</html>
